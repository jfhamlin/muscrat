;; TODO: rename the test. this is actually a tail call test

(def print mrat.core.io.print)

(def (= a b) (eq? a b))

(def (<= a b)
  (or (< a b) (= a b)))

(def (>= a b)
  (or (> a b) (= a b)))

(def (range beg end)
  (let ((range-tail
         (fn range-tail (suffix beg end)
           (if (>= beg end)
             suffix
             (range-tail (conj suffix (- end 1)) beg (- end 1))))))
    (if (<= beg end)
      (range-tail '() beg end)
      '())))

(def (add a b)
  (+ a b))

(print (length (range 0 10)))
;; requires tail call optimization
(print (length (range 0 1000000)))
